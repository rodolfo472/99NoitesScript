<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Login - Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial;
  background: #0f172a;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.box {
  background: #020617;
  padding: 20px;
  border-radius: 10px;
  width: 300px;
}
input, select, button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 8px;
  border: none;
}
button { background: #22c55e; }
</style>
</head>
<body>

<div class="box">
  <h2>Registrar / Login</h2>

  <input id="nome" placeholder="Nome">
  <select id="estado">
    <option value="">Estado</option>
    <option value="82">Alagoas</option>
    <option value="79">Sergipe</option>
  </select>

  <select id="sexo">
    <option value="">Sexo</option>
    <option>Masculino</option>
    <option>Feminino</option>
  </select>

  <button onclick="registrar()">Registrar / Entrar</button>
</div>

<script>
function gerarNumero(prefixo) {
  let resto = "";
  for (let i = 0; i < 9; i++) resto += Math.floor(Math.random()*10);
  return prefixo + resto;
}

function registrar() {
  const nome = nome.value.trim();
  const estado = document.getElementById("estado").value;
  const sexo = document.getElementById("sexo").value;

  if (!nome || !estado || !sexo) {
    alert("Preencha tudo");
    return;
  }

  let numero = localStorage.getItem("numero_usuario");
  if (!numero) numero = gerarNumero(estado);

  const user = { nome, estado, sexo, numero };

  localStorage.setItem("usuario", JSON.stringify(user));
  localStorage.setItem("numero_usuario", numero);

  location.href = "chat.html";
}

// login automÃ¡tico
if (localStorage.getItem("usuario")) {
  location.href = "chat.html";
}
</script>

</body>
</html>
