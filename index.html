<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0f172a;
  color:white;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card {
  background:#020617;
  padding:20px;
  border-radius:14px;
  width:300px;
}
input, select, button {
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:8px;
  border:none;
}
button { background:#22c55e; }
small { opacity:0.8; }
</style>
</head>

<body>

<div class="card">
  <h3>ðŸ‘¤ Cadastro</h3>

  <input id="nome" placeholder="Nome">
  <input id="senha" type="password" placeholder="Senha">

  <select id="genero">
    <option value="">GÃªnero</option>
    <option>Masculino</option>
    <option>Feminino</option>
  </select>

  <select id="estado">
    <option value="">Estado</option>
    <option value="82">Alagoas (82)</option>
    <option value="79">Sergipe (79)</option>
  </select>

  <small>ðŸ“± Seu nÃºmero serÃ¡ criado automaticamente</small>

  <button onclick="entrar()">Criar conta</button>
</div>

<script>
function gerarNumero(ddd) {
  let numero = "9";
  for (let i = 0; i < 8; i++) {
    numero += Math.floor(Math.random() * 10);
  }
  return ddd + numero;
}

function entrar() {
  const nome = nomeInput.value.trim();
  const senha = senhaInput.value.trim();
  const genero = generoSelect.value;
  const ddd = estadoSelect.value;

  if (!nome || !senha || !genero || !ddd) {
    alert("Preencha tudo");
    return;
  }

  // gera nÃºmero Ãºnico
  let numero;
  do {
    numero = gerarNumero(ddd);
  } while (localStorage.getItem("user_" + numero));

  const userData = {
    nome,
    genero,
    numero
  };

  // salva usuÃ¡rio
  localStorage.setItem("usuario_logado", numero);
  localStorage.setItem("user_" + numero, JSON.stringify(userData));

  // inicializa contatos
  if (!localStorage.getItem("contatos_" + numero)) {
    localStorage.setItem("contatos_" + numero, JSON.stringify([]));
  }

  location.href = "chat.html";
}

const nomeInput = document.getElementById("nome");
const senhaInput = document.getElementById("senha");
const generoSelect = document.getElementById("genero");
const estadoSelect = document.getElementById("estado");

// login automÃ¡tico
const logado = localStorage.getItem("usuario_logado");
if (logado) location.href = "chat.html";
</script>

</body>
</html>
