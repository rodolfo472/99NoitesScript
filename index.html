<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0f172a;
  color:white;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card {
  background:#020617;
  padding:20px;
  border-radius:14px;
  width:300px;
}
input, select, button {
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:8px;
  border:none;
}
button { background:#22c55e; }
</style>
</head>

<body>

<div class="card">
  <h3>üë§ Cadastro / Login</h3>

  <input id="nome" placeholder="Nome">

  <select id="sexo">
    <option value="">Sexo</option>
    <option>Masculino</option>
    <option>Feminino</option>
  </select>

  <select id="estado">
    <option value="">Estado</option>
    <option value="82">Alagoas (82)</option>
    <option value="79">Sergipe (79)</option>
  </select>

  <button onclick="registrar()">Entrar</button>
</div>

<script>
function gerarNumero(ddd) {
  let n = "9";
  for (let i = 0; i < 8; i++) {
    n += Math.floor(Math.random() * 10);
  }
  return ddd + n;
}

function registrar() {
  const nome = document.getElementById("nome").value.trim();
  const sexo = document.getElementById("sexo").value;
  const estado = document.getElementById("estado").value;

  if (!nome || !sexo || !estado) {
    alert("Preencha tudo");
    return;
  }

  let numero = gerarNumero(estado);

  const usuario = { nome, sexo, numero };

  localStorage.setItem("usuario", JSON.stringify(usuario));
  localStorage.setItem("usuario_logado", numero);
  localStorage.setItem("contatos_" + numero, JSON.stringify([]));

  // redirecionamento seguro
  setTimeout(() => {
    window.location.replace("chat.html");
  }, 100);
}

// ‚ö†Ô∏è N√ÉO redireciona automaticamente aqui
</script>

</body>
</html>
