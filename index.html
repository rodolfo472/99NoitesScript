<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>VOIDVERSE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<style>
body{
  margin:0;
  overflow:hidden;
  background:#0b0e1a;
  font-family:Arial;
}

/* HUD */
#hud{
  position:fixed;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  color:white;
  background:rgba(0,0,0,0.55);
  padding:10px 22px;
  border-radius:20px;
  font-size:20px;
}

/* Mobile buttons */
#mobileControls{
  position:fixed;
  bottom:90px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:18px;
}

.mobileBtn{
  width:70px;
  height:70px;
  border-radius:50%;
  border:none;
  background:#1e2238;
  color:white;
  font-size:26px;
}
</style>
</head>
<body>

<div id="hud">ðŸ’° <span id="money">0</span></div>

<div id="mobileControls">
  <button class="mobileBtn" id="btnUp">â¬†</button>
  <button class="mobileBtn" id="btnDown">â¬‡</button>
</div>

<script>
/* ===== SETUP ===== */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x0b0e1a);

const camera = new THREE.PerspectiveCamera(70, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

/* ===== LUZ ===== */
scene.add(new THREE.AmbientLight(0xffffff,0.6));
const sun = new THREE.DirectionalLight(0xffffff,1);
sun.position.set(10,20,10);
scene.add(sun);

/* ===== CHÃƒO ===== */
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(300,300),
  new THREE.MeshStandardMaterial({color:0x111827})
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

/* ===== PLAYER (ROBLOX STYLE) ===== */
const player = new THREE.Group();

function part(w,h,d,color,y){
  const m = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({color})
  );
  m.position.y = y;
  return m;
}

player.add(
  part(1.3,1.3,1.3,0xffccaa,3.3), // cabeÃ§a
  part(1.6,2.2,1.1,0x3b82f6,2),   // torso
  part(0.6,2,0.6,0x374151,1),     // perna esq
  part(0.6,2,0.6,0x374151,1),     // perna dir
);
player.children[2].position.x = -0.4;
player.children[3].position.x =  0.4;

scene.add(player);
player.position.y = 0;

/* ===== CÃ‚MERA ===== */
let camAngle = 0;
camera.position.set(0,5,8);

/* ===== CONTROLES ===== */
const keys = {};
document.addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
document.addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);

let up=false, down=false;
btnUp.ontouchstart=()=>up=true;
btnUp.ontouchend=()=>up=false;
btnDown.ontouchstart=()=>down=true;
btnDown.ontouchend=()=>down=false;

/* ===== ITENS ===== */
let money = 0;
const moneyUI = document.getElementById("money");
const items = [];

function spawnItem(){
  const item = new THREE.Mesh(
    new THREE.OctahedronGeometry(0.8),
    new THREE.MeshStandardMaterial({color:0x22c55e})
  );
  item.position.set(
    Math.random()*80-40,
    0.8,
    Math.random()*80-40
  );
  scene.add(item);
  items.push(item);
}
setInterval(spawnItem,1500);

/* ===== LOOP ===== */
function animate(){
  requestAnimationFrame(animate);

  let speed = 0.22;

  if(keys.w || up) player.position.z -= speed;
  if(keys.s || down) player.position.z += speed;
  if(keys.a) player.position.x -= speed;
  if(keys.d) player.position.x += speed;

  // cÃ¢mera
  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 8;
  camera.lookAt(player.position);

  // coleta
  items.forEach((it,i)=>{
    if(player.position.distanceTo(it.position)<1.5){
      scene.remove(it);
      items.splice(i,1);
      money += 10;
      moneyUI.innerText = money;
    }
  });

  renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
