<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Video Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background: #0f172a;
  color: white;
  font-family: Arial;
  text-align: center;
}

video {
  width: 45%;
  border-radius: 12px;
  background: black;
  margin: 5px;
}

button {
  padding: 10px 15px;
  margin: 10px;
  border-radius: 8px;
  border: none;
  background: #22c55e;
  font-size: 16px;
}
</style>
</head>

<body>

<h2>ðŸ“ž Video Chat</h2>

<video id="localVideo" autoplay muted></video>
<video id="remoteVideo" autoplay></video>

<br>

<button onclick="startCamera()">Ligar CÃ¢mera</button>
<button onclick="startCall()">Iniciar Chamada</button>

<script>
let localStream;
let peerConnection;

const config = {
  iceServers: [{ urls: "stun:stun.l.google.com:19302" }]
};

async function startCamera() {
  localStream = await navigator.mediaDevices.getUserMedia({
    video: true,
    audio: true
  });
  localVideo.srcObject = localStream;
}

function startCall() {
  peerConnection = new RTCPeerConnection(config);

  localStream.getTracks().forEach(track => {
    peerConnection.addTrack(track, localStream);
  });

  peerConnection.ontrack = event => {
    remoteVideo.srcObject = event.streams[0];
  };

  peerConnection.onicecandidate = event => {
    if (event.candidate) {
      console.log("ICE:", JSON.stringify(event.candidate));
    }
  };

  peerConnection.createOffer()
    .then(offer => peerConnection.setLocalDescription(offer))
    .then(() => {
      console.log("COPIE ESTA OFFER:");
      console.log(JSON.stringify(peerConnection.localDescription));
    });
}
</script>

</body>
</html>
