<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>AI Prof - Game Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
}
.hidden { display: none; }

header {
  background: #020617;
  padding: 15px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}

.container {
  padding: 15px;
}

input, button {
  padding: 10px;
  margin: 5px 0;
  width: 100%;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

button {
  background: #22c55e;
  cursor: pointer;
}

#chat {
  height: 220px;
  background: #020617;
  border-radius: 8px;
  padding: 10px;
  overflow-y: auto;
  margin-bottom: 10px;
}

.msg { margin-bottom: 8px; }
.user { color: #60a5fa; }
.system { color: #22c55e; }

.panel {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.panel div {
  flex: 1;
  background: #020617;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
}

canvas {
  margin-top: 10px;
  background: #000;
  border-radius: 10px;
}
</style>
</head>

<body>

<header>ğŸ® AI Prof - Game Chat</header>

<div class="container" id="auth">
  <h3>Registrar / Login</h3>
  <input id="name" placeholder="Nome">
  <input id="pass" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<div class="container hidden" id="game">

  <div class="panel">
    <div>ğŸ’° Moedas<br><span id="coins">0</span></div>
    <div>ğŸ† NÃ­vel<br><span id="rank">1</span></div>
  </div>

  <div id="chat"></div>

  <input id="msg" placeholder="Digite sua mensagem">
  <button onclick="send()">Enviar</button>

  <hr>

  <button onclick="buyPrize()">ğŸ Comprar PrÃªmio (100.000 moedas)</button>

  <hr>

  <h3>ğŸ–¼ Criador de Imagens</h3>
  <input id="imgText" placeholder="Descreva a imagem (ex: fogo, gamer, azul)">
  <button onclick="criarImagem()">Criar Imagem</button>
  <button onclick="baixarImagem()">Baixar Imagem</button>

  <canvas id="canvas" width="300" height="300"></canvas>

</div>

<script>
let user = null;
let coins = 0;

// LOGIN
function login() {
  const name = document.getElementById("name").value;
  const pass = document.getElementById("pass").value;
  if (!name || !pass) return alert("Preencha tudo");

  user = name;
  coins = Number(localStorage.getItem("coins_" + user)) || 0;

  auth.classList.add("hidden");
  game.classList.remove("hidden");

  systemMsg("Bem-vindo, " + user + "!");
  update();
}

// CHAT
function send() {
  const text = msg.value.trim();
  if (!text) return;

  chatMsg(user + ": " + text, "user");
  msg.value = "";

  setTimeout(() => responderSistema(text), 500);
}

function chatMsg(text, cls) {
  const div = document.createElement("div");
  div.className = "msg " + cls;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function systemMsg(text) {
  chatMsg("AI Prof: " + text, "system");
}

// RESPOSTAS AUTOMÃTICAS
function responderSistema(pergunta) {
  pergunta = pergunta.toLowerCase();
  let r = "";

  if (pergunta.includes("hora"))
    r = "Agora sÃ£o " + new Date().toLocaleTimeString("pt-BR");
  else if (pergunta.includes("dia") || pergunta.includes("data"))
    r = "Hoje Ã© " + new Date().toLocaleDateString("pt-BR");
  else if (pergunta.includes("capital do brasil"))
    r = "A capital do Brasil Ã© BrasÃ­lia.";
  else if (pergunta.includes("brasil"))
    r = "O Brasil foi descoberto em 1500.";
  else if (pergunta.includes("oi") || pergunta.includes("olÃ¡"))
    r = "OlÃ¡! Como posso ajudar?";
  else if (pergunta.includes("moeda"))
    r = "VocÃª ganha 1 moeda por segundo online.";
  else if (/[0-9]/.test(pergunta) && /[\+\-\*\/]/.test(pergunta)) {
    try {
      r = "Resultado: " + eval(pergunta.replace(/[^0-9+\-*/.]/g, ""));
    } catch {
      r = "NÃ£o consegui calcular.";
    }
  } else
    r = "Posso responder horas, datas, Brasil, moedas e matemÃ¡tica bÃ¡sica.";

  systemMsg(r);
}

// MOEDAS
setInterval(() => {
  if (user) {
    coins++;
    update();
  }
}, 1000);

function update() {
  coinsEl.innerText = coins;
  rankEl.innerText = Math.max(1, Math.floor(coins / 1000));
  localStorage.setItem("coins_" + user, coins);
}

function buyPrize() {
  if (coins >= 100000) {
    coins -= 100000;
    systemMsg("ğŸ‰ PrÃªmio comprado!");
    update();
  } else {
    systemMsg("âŒ Moedas insuficientes.");
  }
}

// CRIADOR DE IMAGEM
function criarImagem() {
  const texto = imgText.value || "AI Prof";
  const c = canvas;
  const ctx = c.getContext("2d");

  ctx.fillStyle = `hsl(${Math.random()*360},70%,40%)`;
  ctx.fillRect(0,0,300,300);

  for (let i=0;i<10;i++) {
    ctx.beginPath();
    ctx.arc(Math.random()*300,Math.random()*300,Math.random()*60,0,Math.PI*2);
    ctx.fillStyle = "rgba(255,255,255,0.2)";
    ctx.fill();
  }

  ctx.fillStyle = "#fff";
  ctx.font = "bold 22px Arial";
  ctx.textAlign = "center";
  ctx.fillText(texto.substring(0,20),150,160);

  systemMsg("Imagem criada ğŸ¨");
}

function baixarImagem() {
  const link = document.createElement("a");
  link.download = "imagem_ai_prof.png";
  link.href = canvas.toDataURL();
  link.click();
}
</script>

</body>
</html>
